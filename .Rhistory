Mobility_Intervista <- mread.csv(url(url_Mobility_Intervista), header=T, sep=",t", stringsAsFactors=FALSE, encoding="UTF-8")
url_Mobility_Intervista  <- "https://raw.githubusercontent.com/statistikZH/covid19monitoring_mobility_intervista/master/Mobility_Intervista.csv"
Mobility_Intervista <- read.csv(url(url_Mobility_Intervista), header=T, sep=",t", stringsAsFactors=FALSE, encoding="UTF-8")
#Mobility_Intervista
url_Mobility_Intervista  <- "https://raw.githubusercontent.com/statistikZH/covid19monitoring_mobility_intervista/master/Mobility_Intervista.csv"
Mobility_Intervista <- read.csv(url(url_Mobility_Intervista), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
View(Mobility_Intervista)
#Mobility_Intervista
url_Mobility_Intervista  <- "https://raw.githubusercontent.com/statistikZH/covid19monitoring_mobility_intervista/master/Mobility_Intervista.csv"
Mobility_Intervista <- read.csv(url(url_Mobility_Intervista), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Other_Weather
url_Other_Weather <- "https://raw.githubusercontent.com/statistikZH/covid19monitoring_other_Weather/master/Other_Weather.csv"
Other_Weather <- read.csv(url(url_Other_Weather), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#url_Economy_FlightTrafficZRH="https://github.com/statistikZH/covid19monitoring_economy_FlightTraffic/blob/master/Economy_FlightTrafficZRH.csv"
#Economy_FlightTrafficZRH<-data.frame(read_csv(url(url_Economy_FlightTrafficZRH)))
source("./function.R")
CheckIfDfFollowsStandard(Mobility_Intervista)
source("./function.R")
CheckIfDfFollowsStandard(Mobility_Intervista)
CheckIfDfFollowsStandard(Other_Weather)
covid19monitoring <- rbind(Mobility_Intervista, Other_Weather)
write.table(covid19monitoring, "./covid19monitoring.csv", sep=",", fileEncoding="UTF-8", row.names = F)
names(covid19monitoring)
Metadata <- covid19monitoring[, ! names(covid19monitoring) %in% c("date", "value")]
names(Metadata)
View(Metadata)
Metadata_prep <- covid19monitoring[, ! names(covid19monitoring) %in% c("date", "value")]
Metadata <- df[!duplicated(Metadata_prep[names(Metadata_prep)]),]
!duplicated(Metadata_prep[names(Metadata_prep)])
Metadata <- Metadata_prep[!duplicated(Metadata_prep[names(Metadata_prep)]),]
View(Metadata)
CreateMetadata()
source("./function.R")
CreateMetadata()
covid19monitoring <- read.csv("./covid19monitoring.csv", header=T, sep="\t", stringsAsFactors=FALSE, encoding="UTF-8")
Metadata_prep <- covid19monitoring[, ! names(covid19monitoring) %in% c("date", "value")]
Metadata <- Metadata_prep[!duplicated(Metadata_prep[names(Metadata_prep)]),]
write.table(Metadata, "./Metadata.csv", sep=",", fileEncoding="UTF-8", row.names = F)
covid19monitoring <- read.csv("./covid19monitoring.csv", header=T, sep="\t", stringsAsFactors=FALSE, encoding="UTF-8")
Metadata_prep <- covid19monitoring[, ! names(covid19monitoring) %in% c("date", "value")]
Metadata <- Metadata_prep[!duplicated(Metadata_prep[names(Metadata_prep)]),]
!duplicated(Metadata_prep[names(Metadata_prep)])
!duplicated(Metadata_prep[names(Metadata_prep)
)
unique_rows <- !duplicated(covid19monitoring_sel[name(covid19monitoring_sel)])
covid19monitoring <- read.csv("./covid19monitoring.csv", header=T, sep="\t", stringsAsFactors=FALSE, encoding="UTF-8")
covid19monitoring_sel <- covid19monitoring[, ! names(covid19monitoring) %in% c("date", "value")]
unique_rows <- !duplicated(covid19monitoring_sel[name(covid19monitoring_sel)])
unique_rows <- !duplicated(covid19monitoring_sel[names(covid19monitoring_sel)])
Metadata <- covid19monitoring_sel[unique_rows,]
covid19monitoring <- read.csv("./covid19monitoring.csv", header=T, sep="\t", stringsAsFactors=FALSE, encoding="UTF-8")
covid19monitoring_sel <- covid19monitoring[, ! names(covid19monitoring) %in% c("date", "value")]
unique_rows <- !duplicated(covid19monitoring_sel[names(covid19monitoring_sel)])
Metadata <- covid19monitoring_sel[unique_rows,]
unique_rows
names(covid19monitoring_sel)
covid19monitoring <- read.csv("./covid19monitoring.csv", header=T, sep="\t", stringsAsFactors=FALSE, encoding="UTF-8")
covid19monitoring_sel <- covid19monitoring[, ! names(covid19monitoring) %in% c("date", "value")]
covid19monitoring_sel
names(covid19monitoring_sel)
View(covid19monitoring_sel)
covid19monitoring <- read.csv("./covid19monitoring.csv", header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
View(covid19monitoring)
covid19monitoring_sel <- covid19monitoring[, ! names(covid19monitoring) %in% c("date", "value")]
unique_rows <- !duplicated(df[c("var1","var2")])
covid19monitoring <- read.csv("./covid19monitoring.csv", header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
covid19monitoring_sel <- covid19monitoring[, ! names(covid19monitoring) %in% c("date", "value")]
unique_rows <- !duplicated(df[names(covid19monitoring_sel)])
covid19monitoring <- read.csv("./covid19monitoring.csv", header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
covid19monitoring_sel <- covid19monitoring[, ! names(covid19monitoring) %in% c("date", "value")]
unique_rows <- !duplicated(covid19monitoring_sel[names(covid19monitoring_sel)])
covid19monitoring_sel
View(covid19monitoring_sel)
unique_rows
View(unique_rows)
Metadata <- Metadata_prep[!duplicated(Metadata_prep[names(Metadata_prep)]),]
Metadata <- covid19monitoring_sel[unique_rows,]
View(Metadata)
source("./function.R")
CreateMetadata()
View(covid19monitoring)
nrow(url_Mobility_Intervista)
nrow(url_Other_Weather)
#Mobility_Intervista
url_Mobility_Intervista  <- "https://raw.githubusercontent.com/statistikZH/covid19monitoring_mobility_intervista/master/Mobility_Intervista.csv"
Mobility_Intervista <- read.csv(url(url_Mobility_Intervista), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Other_Weather
url_Other_Weather <- "https://raw.githubusercontent.com/statistikZH/covid19monitoring_other_Weather/master/Other_Weather.csv"
Other_Weather <- read.csv(url(url_Other_Weather), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#url_Economy_FlightTrafficZRH="https://github.com/statistikZH/covid19monitoring_economy_FlightTraffic/blob/master/Economy_FlightTrafficZRH.csv"
#Economy_FlightTrafficZRH<-data.frame(read_csv(url(url_Economy_FlightTrafficZRH)))
nrow(Mobility_Intervista)
nrow(Other_Weather)
888+588
nrow(Metadata)
nrow(covid19monitoring)
CheckIfDfFollowsStandard(Mobility_Intervista)
CheckIfDfFollowsStandard(Mobility_Intervista)
CheckIfDfFollowsStandard(Other_Weather)
CheckIfDfFollowsStandard(Other_Weather)
CheckIfDfFollowsStandard(Mobility_Intervista)
source("./function.R")
CreateMetadata()
install.packages("DT")
# Download data
urlfile="https://raw.githubusercontent.com/statistikZH/covid19monitoring/master/covid19monitoring.csv"
cons<-data.frame(read_delim(url(urlfile), delim=","))
cons$date<-as.POSIXct(cons$date)
cons<-cons[order(cons$location, cons$variable_short, cons$date),]
cons<-subset(cons, date>"01-01-2020")
# Intervista----
options(encoding = "UTF-8")
c("tages_distanz_median", "tages_distanz_median_alter_1529",
"tages_distanz_median_alter_3064", "tages_distanz_median_alter_6579",
"tages_distanz_median_erwebstaetig", "tages_distanz_median_in_ausbildung",
"tages_distanz_median_maennlich", "tages_distanz_median_nicht_erwerbstaetig",
"tages_distanz_median_weiblich", "tages_radius_median", "tages_radius_median_alter_1529",
"tages_radius_median_alter_3064", "tages_radius_median_alter_6579",
"tages_radius_median_erwebstaetig", "tages_radius_median_in_ausbildung",
"tages_radius_median_maennlich", "tages_radius_median_nicht_erwerbstaetig",
"tages_radius_median_weiblich")
read.csv("C:\\Users\\pm\\Wissenschaft\\monitoring covid\\covid19monitoring_mobility_intervista\\Mobility_Intervista.csv")
intervista<-read.csv("C:\\Users\\pm\\Wissenschaft\\monitoring covid\\covid19monitoring_mobility_intervista\\Mobility_Intervista.csv")
ii<-intervista[order(intervista$location,
intervista$variable_short, as.POSIXct(intervista$date)),]
with(subset(ii, variable_short%in%c("tages_distanz_median_alter_1529",
"tages_distanz_median_alter_3064", "tages_distanz_median_alter_6579")),
xyplot(value~as.POSIXct(date), groups=variable_short, type="l"))
with(subset(ii, variable_short%in%c("tages_distanz_median_maennlich",
"tages_distanz_median_weiblich")),
xyplot(value~as.POSIXct(date), groups=variable_short, type="l"))
with(subset(ii, variable_short%in%c("tages_distanz_median_erwerbstaetig", "tages_distanz_median_in_ausbildung",
"tages_distanz_median_nicht_erwerbstaetig")),
xyplot(value~as.POSIXct(date), groups=variable_short, type="l"))
with(subset(ii, variable_short%in%c("tages_distanz_median") & location%in%c("CH", "ZH")),
xyplot(value~as.POSIXct(date), groups=location, type="l"))
with(subset(ii, variable_short%in%c("tages_distanz_median", "tages_radius_median") & location%in%c("CH")),
xyplot(value~as.POSIXct(date), groups=variable_short, type="l"))
#wetter-----
c("globalstrahlung", "luftdruck", "luftfeuchte", "sonnenschein",
"temp_max", "temp_min", "temp_mittel")
aa<-read.csv("C:\\Users\\pm\\Wissenschaft\\monitoring covid\\covid19monitoring_other_Weather\\Other_Weather.csv")
ii<-aa[order(aa$location, aa$variable_short, as.POSIXct(aa$date)),]
with(subset(ii, variable_short%in% c("temp_max", "temp_min", "temp_mittel")),
xyplot(value~as.POSIXct(date), groups=variable_short, type="l"))
with(subset(ii, variable_short%in% c("globalstrahlung")),
xyplot(value~as.POSIXct(date), groups=variable_short, type="l"))
with(subset(ii, variable_short%in% c("luftdruck")),
xyplot(value~as.POSIXct(date), groups=variable_short, type="l"))
with(subset(ii, variable_short%in% c("temp_max", "temp_min", "temp_mittel")),
xyplot(value~as.POSIXct(date), groups=variable_short, type="l"))
# zrh----
with(subset(cons, variable_short =="fluege_zrh"),
xyplot(value~as.POSIXct(date), groups=variable_short, type="l"))
library(hochr)
library(xts)
lusualib()
#  Other_Weather.R
# Import libraries
require(tidyquant)
require(xts)
require(anytime)
library (readr)
library (lattice)
library(chron)
library(reshape)
library(readr)
# Download data
urlfile="https://raw.githubusercontent.com/statistikZH/covid19monitoring/master/covid19monitoring.csv"
cons<-data.frame(read_delim(url(urlfile), delim=","))
cons$date<-as.POSIXct(cons$date)
cons<-cons[order(cons$location, cons$variable_short, cons$date),]
cons<-subset(cons, date>"01-01-2020")
# Intervista----
options(encoding = "UTF-8")
c("tages_distanz_median", "tages_distanz_median_alter_1529",
"tages_distanz_median_alter_3064", "tages_distanz_median_alter_6579",
"tages_distanz_median_erwebstaetig", "tages_distanz_median_in_ausbildung",
"tages_distanz_median_maennlich", "tages_distanz_median_nicht_erwerbstaetig",
"tages_distanz_median_weiblich", "tages_radius_median", "tages_radius_median_alter_1529",
"tages_radius_median_alter_3064", "tages_radius_median_alter_6579",
"tages_radius_median_erwebstaetig", "tages_radius_median_in_ausbildung",
"tages_radius_median_maennlich", "tages_radius_median_nicht_erwerbstaetig",
"tages_radius_median_weiblich")
read.csv("C:\\Users\\pm\\Wissenschaft\\monitoring covid\\covid19monitoring_mobility_intervista\\Mobility_Intervista.csv")
intervista<-read.csv("C:\\Users\\pm\\Wissenschaft\\monitoring covid\\covid19monitoring_mobility_intervista\\Mobility_Intervista.csv")
ii<-intervista[order(intervista$location,
intervista$variable_short, as.POSIXct(intervista$date)),]
with(subset(ii, variable_short%in%c("tages_distanz_median_alter_1529",
"tages_distanz_median_alter_3064", "tages_distanz_median_alter_6579")),
xyplot(value~as.POSIXct(date), groups=variable_short, type="l"))
with(subset(ii, variable_short%in%c("tages_distanz_median_maennlich",
"tages_distanz_median_weiblich")),
xyplot(value~as.POSIXct(date), groups=variable_short, type="l"))
with(subset(ii, variable_short%in%c("tages_distanz_median_erwerbstaetig", "tages_distanz_median_in_ausbildung",
"tages_distanz_median_nicht_erwerbstaetig")),
xyplot(value~as.POSIXct(date), groups=variable_short, type="l"))
with(subset(ii, variable_short%in%c("tages_distanz_median") & location%in%c("CH", "ZH")),
xyplot(value~as.POSIXct(date), groups=location, type="l"))
with(subset(ii, variable_short%in%c("tages_distanz_median", "tages_radius_median") & location%in%c("CH")),
xyplot(value~as.POSIXct(date), groups=variable_short, type="l"))
#wetter-----
c("globalstrahlung", "luftdruck", "luftfeuchte", "sonnenschein",
"temp_max", "temp_min", "temp_mittel")
aa<-read.csv("C:\\Users\\pm\\Wissenschaft\\monitoring covid\\covid19monitoring_other_Weather\\Other_Weather.csv")
ii<-aa[order(aa$location, aa$variable_short, as.POSIXct(aa$date)),]
with(subset(ii, variable_short%in% c("temp_max", "temp_min", "temp_mittel")),
xyplot(value~as.POSIXct(date), groups=variable_short, type="l"))
with(subset(ii, variable_short%in% c("globalstrahlung")),
xyplot(value~as.POSIXct(date), groups=variable_short, type="l"))
with(subset(ii, variable_short%in% c("luftdruck")),
xyplot(value~as.POSIXct(date), groups=variable_short, type="l"))
with(subset(ii, variable_short%in% c("temp_max", "temp_min", "temp_mittel")),
xyplot(value~as.POSIXct(date), groups=variable_short, type="l"))
# zrh----
with(subset(cons, variable_short =="fluege_zrh"),
xyplot(value~as.POSIXct(date), groups=variable_short, type="l"))
#Mobility_Intervista
url_Mobility_Intervista  <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_mobility_intervista/master/Mobility_Intervista.csv"
Mobility_Intervista <- read.csv(url(url_Mobility_Intervista), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Other_Weather
url_Other_Weather <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_other_Weather/master/Other_Weather.csv"
Other_Weather <- read.csv(url(url_Other_Weather), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Economy_FlightTrafficZRH
url_Economy_FlightTrafficZRH <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_economy_FlightTraffic/master/Economy_FlightTraffic.csv"
Economy_FlightTrafficZRH <- read.csv(url(url_Economy_FlightTrafficZRH), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
source("./function.R")
CheckIfDfFollowsStandard(Mobility_Intervista)
CheckIfDfFollowsStandard(Other_Weather)
CheckIfDfFollowsStandard(Economy_FlightTrafficZRH)
write.table(covid19socialmonitoring_20200328_beta, "./internalcheck.csv", sep=",", fileEncoding="UTF-8", row.names = F)
write.table(covid19monitoring, "./internalcheck.csv", sep=",", fileEncoding="UTF-8", row.names = F)
write.table(covid19monitoring, "./internalcheck.csv", sep=",", fileEncoding="UTF-8", row.names = F)
covid19monitoring <- rbind(Mobility_Intervista, Other_Weather, Economy_FlightTrafficZRH)
covid19monitoring <- rbind(Mobility_Intervista, Other_Weather, Economy_FlightTrafficZRH)
covid19monitoring <- rbind(Mobility_Intervista, Other_Weather, Economy_FlightTrafficZRH)
#Mobility_Intervista
url_Mobility_Intervista  <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_mobility_intervista/master/Mobility_Intervista.csv"
Mobility_Intervista <- read.csv(url(url_Mobility_Intervista), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Other_Weather
url_Other_Weather <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_other_Weather/master/Other_Weather.csv"
Other_Weather <- read.csv(url(url_Other_Weather), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Economy_FlightTrafficZRH
url_Economy_FlightTrafficZRH <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_economy_FlightTraffic/master/Economy_FlightTraffic.csv"
Economy_FlightTrafficZRH <- read.csv(url(url_Economy_FlightTrafficZRH), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
source("./function.R")
CheckIfDfFollowsStandard(Mobility_Intervista)
CheckIfDfFollowsStandard(Other_Weather)
CheckIfDfFollowsStandard(Economy_FlightTrafficZRH)
covid19monitoring <- rbind(Mobility_Intervista, Other_Weather, Economy_FlightTrafficZRH)
covid19monitoring <- rbind(Mobility_Intervista, Other_Weather, Economy_FlightTrafficZRH)
write.table(covid19monitoring, "./internalcheck.csv", sep=",", fileEncoding="UTF-8", row.names = F)
file.copy("./internalcheck.csv", "./covid19monitoring.csv", overwrite = TRUE)
file.copy("./internalcheck.csv", "./covid19socialmonitoring_20200328_beta.csv", overwrite = TRUE)
source("./function.R")
CreateMetadata()
file.copy("./internalcheck.csv", "./covid19socialmonitoring_beta.csv", overwrite = TRUE)
datatable
library(DT)
#Mobility_Intervista
url_Mobility_Intervista  <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_mobility_intervista/master/Mobility_Intervista.csv"
Mobility_Intervista <- read.csv(url(url_Mobility_Intervista), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Other_Weather
url_Other_Weather <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_other_Weather/master/Other_Weather.csv"
Other_Weather <- read.csv(url(url_Other_Weather), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Economy_FlightTrafficZRH
url_Economy_FlightTrafficZRH <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_economy_FlightTraffic/master/Economy_FlightTraffic.csv"
Economy_FlightTrafficZRH <- read.csv(url(url_Economy_FlightTrafficZRH), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Economy_SMI
url_Economy_SMI <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_economy_FlightTraffic/master/Economy_SMI.csv"
Economy_SMI <- read.csv(url(url_SMI), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Mobility_Intervista
url_Mobility_Intervista  <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_mobility_intervista/master/Mobility_Intervista.csv"
Mobility_Intervista <- read.csv(url(url_Mobility_Intervista), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Other_Weather
url_Other_Weather <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_other_Weather/master/Other_Weather.csv"
Other_Weather <- read.csv(url(url_Other_Weather), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Economy_FlightTrafficZRH
url_Economy_FlightTrafficZRH <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_economy_FlightTraffic/master/Economy_FlightTraffic.csv"
Economy_FlightTrafficZRH <- read.csv(url(url_Economy_FlightTrafficZRH), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Economy_SMI
url_Economy_SMI <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_economy_FlightTraffic/master/Economy_SMI.csv"
Economy_SMI <- read.csv(url(url_Economy_SMI), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Other_Weather
url_Other_Weather <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_other_Weather/master/Other_Weather.csv"
#Mobility_Intervista
url_Mobility_Intervista  <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_mobility_intervista/master/Mobility_Intervista.csv"
Mobility_Intervista <- read.csv(url(url_Mobility_Intervista), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Other_Weather
url_Other_Weather <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_other_Weather/master/Other_Weather.csv"
Other_Weather <- read.csv(url(url_Other_Weather), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Economy_FlightTrafficZRH
url_Economy_FlightTrafficZRH <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_economy_FlightTraffic/master/Economy_FlightTraffic.csv"
Economy_FlightTrafficZRH <- read.csv(url(url_Economy_FlightTrafficZRH), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Economy_SMI
url_Economy_SMI <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_economy_SMI/master/Economy_SMI.csv"
Economy_SMI <- read.csv(url(url_Economy_SMI), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
url_Economy_SMI <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_economy_SMI/master/Economy_SMI.csv"
url_Economy_SMI
#Mobility_Intervista
url_Mobility_Intervista  <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_mobility_intervista/master/Mobility_Intervista.csv"
Mobility_Intervista <- read.csv(url(url_Mobility_Intervista), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Other_Weather
url_Other_Weather <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_other_Weather/master/Other_Weather.csv"
Other_Weather <- read.csv(url(url_Other_Weather), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Economy_FlightTrafficZRH
url_Economy_FlightTrafficZRH <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_economy_FlightTraffic/master/Economy_FlightTraffic.csv"
Economy_FlightTrafficZRH <- read.csv(url(url_Economy_FlightTrafficZRH), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Economy_SMI
url_Economy_SMI <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_economy_SMI/master/Economy_SMI.csv"
Economy_SMI <- read.csv(url(url_Economy_SMI), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
url_Economy_SMI <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_economy_SMI/master/Economy_SMI.csv"
url_Economy_SMI
url_Economy_SMI
url_Economy_SMI
read.csv(url(url_Economy_SMI), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
url_Economy_FlightTrafficZRH <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_economy_FlightTraffic/master/Economy_FlightTraffic.csv"
Economy_FlightTrafficZRH <- read.csv(url(url_Economy_FlightTrafficZRH), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Economy_SMI
url_Economy_SMI <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_economy_SMI/master/economy_SMI.csv"
Economy_SMI <- read.csv(url(url_Economy_SMI), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#  Economy_SMI.R
# Import libraries
require(tidyquant)
require(xts)
require(anytime)
library (readr)
library (lattice)
library(chron)
library(reshape)
################################
# Download data
# Download daily closing and volume SMI
pp<-data.frame(tidyquant::tq_get(c("^SSMI", "CHFEUR=X", "CHFUSD=X"), get = "stock.prices"))
################################
# Format data according to data structure specification
smi_index<-with(subset(pp, symbol=="^SSMI"), data.frame(
date=as.POSIXct(paste(date, "00:00:00", sep=" ")),
value=round(close, 2),
topic="Wirtschaft",
variable_short="smi_index",
variable_long="Indexwert SMI",
location="CH",
unit="Index-Punkte",
origin="yahoo finance",
update="täglich",
public="ja",
description="https://github.com/statistikZH/covid19monitoring_economy_SMI"))
smi_volume<-with(subset(pp, symbol=="^SSMI"), data.frame(
date=as.POSIXct(paste(date, "00:00:00", sep=" ")),
value=volume/10^6,
topic="Wirtschaft",
variable_short="smi_volumen",
variable_long="Handelsvolumen SMI",
location="CH",
unit="Anzahl Transaktionen in Mio.",
origin="yahoo finance",
update="täglich",
public="ja",
description="https://github.com/statistikZH/covid19monitoring_economy_SMI"))
chf_eur<-with(subset(pp, symbol=="CHFEUR=X"), data.frame(
date=as.POSIXct(paste(date, "00:00:00", sep=" ")),
value=round(close, 3),
topic="Wirtschaft",
variable_short="chf_eur",
variable_long="Wechselkurs Fr./Euro",
location="CH",
unit=NA,
origin="yahoo finance",
update="täglich",
public="ja",
description="https://github.com/statistikZH/covid19monitoring_economy_SMI"))
chf_usd<-with(subset(pp, symbol=="CHFUSD=X"), data.frame(
date=as.POSIXct(paste(date, "00:00:00", sep=" ")),
value=round(close,3),
topic="Wirtschaft",
variable_short="chf_usd",
variable_long="Wechselkurs Fr./US-Dollar",
location="CH",
unit=NA,
origin="yahoo finance",
update="daily",
public="ja",
description="https://github.com/statistikZH/covid19monitoring_economy_SMI"))
all<-rbind(smi_index, chf_eur, chf_usd)
all<-subset(all, date > "2019-12-31")
################################
# export result
write.table(all, "Economy_SMI.csv", sep=",", fileEncoding="UTF-8", row.names = F)
#Mobility_Intervista
url_Mobility_Intervista  <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_mobility_intervista/master/Mobility_Intervista.csv"
Mobility_Intervista <- read.csv(url(url_Mobility_Intervista), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Other_Weather
url_Other_Weather <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_other_Weather/master/Other_Weather.csv"
Other_Weather <- read.csv(url(url_Other_Weather), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Economy_FlightTrafficZRH
url_Economy_FlightTrafficZRH <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_economy_FlightTraffic/master/Economy_FlightTraffic.csv"
Economy_FlightTrafficZRH <- read.csv(url(url_Economy_FlightTrafficZRH), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Economy_SMI
url_Economy_SMI <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_economy_SMI/master/economy_SMI.csv"
Economy_SMI <- read.csv(url(url_Economy_SMI), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Mobility_Intervista
url_Mobility_Intervista  <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_mobility_intervista/master/Mobility_Intervista.csv"
Mobility_Intervista <- read.csv(url(url_Mobility_Intervista), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Other_Weather
url_Other_Weather <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_other_Weather/master/Other_Weather.csv"
Other_Weather <- read.csv(url(url_Other_Weather), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Economy_FlightTrafficZRH
url_Economy_FlightTrafficZRH <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_economy_FlightTraffic/master/Economy_FlightTraffic.csv"
Economy_FlightTrafficZRH <- read.csv(url(url_Economy_FlightTrafficZRH), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Economy_SMI
url_Economy_SMI <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_economy_SMI/master/Economy_SMI.csv"
Economy_SMI <- read.csv(url(url_Economy_SMI), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Mobility_Intervista
url_Mobility_Intervista  <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_mobility_intervista/master/Mobility_Intervista.csv"
Mobility_Intervista <- read.csv(url(url_Mobility_Intervista), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Other_Weather
url_Other_Weather <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_other_Weather/master/Other_Weather.csv"
Other_Weather <- read.csv(url(url_Other_Weather), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Economy_FlightTrafficZRH
url_Economy_FlightTrafficZRH <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_economy_FlightTraffic/master/Economy_FlightTraffic.csv"
Economy_FlightTrafficZRH <- read.csv(url(url_Economy_FlightTrafficZRH), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Economy_SMI
url_Economy_SMI <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_economy_SMI/master/economy_SMI.csv"
Economy_SMI <- read.csv(url(url_Economy_SMI), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Economy_SIX
url_Economy_SIX <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_economy_SIX/master/economy_SIX.csv"
Economy_SIX <- read.csv(url(url_Economy_SIX), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
file.copy("./internalcheck.csv", "./covid19socialmonitoring.csv", overwrite = TRUE)
file.copy("./internalcheck.csv", "./covid19socialmonitoring.csv", overwrite = TRUE)
file.copy("./internalcheck.csv", "./covid19socialmonitoring.csv", overwrite = TRUE)
#Other_Weather
url_Other_Weather <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_other_Weather/master/Other_Weather.csv"
Other_Weather <- read.csv(url(url_Other_Weather), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Mobility_VBZHardbruecke
url_VBZHardbruecke <- "https://raw.githubusercontent.com/statistikZH/covid19monitoring_mobility_VBZHardbruecke/master/Mobility_VBZHardbruecke.csv"
Mobility_VBZHardbruecke <- read.csv(url(url_VBZHardbruecke), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Mobility_Intervista
url_Mobility_Intervista  <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_mobility_intervista/master/Mobility_Intervista.csv"
Mobility_Intervista <- read.csv(url(url_Mobility_Intervista), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Economy_SMI
url_Economy_SMI <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_economy_SMI/master/Economy_SMI.csv"
Economy_SMI <- read.csv(url(url_Economy_SMI), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Economy_FlightTrafficZRH
url_Economy_FlightTrafficZRH <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_economy_FlightTraffic/master/Economy_FlightTraffic.csv"
Economy_FlightTrafficZRH <- read.csv(url(url_Economy_FlightTrafficZRH), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Economy_SIX
url_Economy_SIX <-
"https://raw.githubusercontent.com/statistikZH/covid19monitoring_economy_SIX/master/Economy_SIX.csv"
Economy_SIX <- read.csv(url(url_Economy_SIX), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
#Education_Mindmaps
url_Education_Mindmaps <-
"https://raw.githubusercontent.com/bildungsmonitoringZH/covid19_edu_mindsteps/master/Bildung_LernplattformMindsteps.csv"
Education_Mindmaps <- read.csv(url(url_Education_Mindmaps), header=T, sep=",", stringsAsFactors=FALSE, encoding="UTF-8")
source("./function.R")
CheckIfDfFollowsStandard(Other_Weather)
CheckIfDfFollowsStandard(Mobility_VBZHardbruecke)
CheckIfDfFollowsStandard(Mobility_Intervista)
CheckIfDfFollowsStandard(Economy_SMI)
CheckIfDfFollowsStandard(Economy_FlightTrafficZRH)
CheckIfDfFollowsStandard(Economy_SIX)
CheckIfDfFollowsStandard(Education_Mindmaps)
covid19monitoring <- rbind(Other_Weather, Mobility_VBZHardbruecke, Mobility_Intervista, Economy_SMI, Economy_FlightTrafficZRH, Economy_SIX, Education_Mindmaps)
covid19monitoring <- rbind(Other_Weather, Mobility_VBZHardbruecke, Mobility_Intervista, Economy_SMI, Economy_FlightTrafficZRH, Economy_SIX, Education_Mindmaps)
write.table(covid19monitoring, "./internalcheck.csv", sep=",", fileEncoding="UTF-8", row.names = F)
file.copy("./internalcheck.csv", "./covid19socialmonitoring.csv", overwrite = TRUE)
source("./function.R")
CreateMetadata()
